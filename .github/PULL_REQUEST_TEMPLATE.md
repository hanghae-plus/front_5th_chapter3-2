# 8주차 과제 체크포인트

## 기본 과제

### 필수

- [x] 반복 유형 선택
  - 일정 생성 또는 수정 시 반복 유형을 선택할 수 있다.
  - 반복 유형은 다음과 같다: 매일, 매주, 매월, 매년
    - 만약, 윤년 29일에 또는 31일에 매월 또는 매년 반복일정을 설정한다면 어떻게 처리할까요? 다른 서비스를 참고해보시고 자유롭게 작성해보세요.
- [x] 반복 간격 설정
  - 각 반복 유형에 대해 간격을 설정할 수 있다.
  - 예: 2일마다, 3주마다, 2개월마다 등
- [x] 반복 일정 표시
  - 캘린더 뷰에서 반복 일정을 시각적으로 구분하여 표시한다.
    - 아이콘을 넣든 태그를 넣든 자유롭게 해보세요!
- [x] 반복 종료
  - 반복 종료 조건을 지정할 수 있다.
  - 옵션: 특정 날짜까지, 특정 횟수만큼, 또는 종료 없음 (예제 특성상, 2025-06-30까지)
- [x] 반복 일정 단일 수정
  - 반복일정을 수정하면 단일 일정으로 변경됩니다.
  - 반복일정 아이콘도 사라집니다.
- [x] 반복 일정 단일 삭제
  - 반복일정을 삭제하면 해당 일정만 삭제합니다.

### 선택

- [x] 예외 날짜 처리:
  - 반복 일정 중 특정 날짜를 제외할 수 있다.
  - 반복 일정 중 특정 날짜의 일정을 수정할 수 있다.
- [x] 요일 지정 (주간 반복의 경우):
  - 주간 반복 시 특정 요일을 선택할 수 있다.
- [x] 월간 반복 옵션:
  - 매월 특정 날짜에 반복되도록 설정할 수 있다.
  - 매월 특정 순서의 요일에 반복되도록 설정할 수 있다.
- [x] 반복 일정 전체 수정 및 삭제
  - 반복 일정의 모든 일정을 수정할 수 있다.
  - 반복 일정의 모든 일정을 삭제할 수 있다.

## 심화 과제

- [x] 이 앱에 적합한 테스트 전략을 만들었나요?

### 각 팀원들의 테스트 전략은?

- 소현 (학습메이트)
    
    저는 굳이 통합테스트로 다 할 수 있을 것 같아서 가 필요 없는 것 같아요!
    
- 영호
    1. **(필수) 반복 유형 선택**
        - 일정 생성 또는 수정 시 반복 유형을 선택할 수 있다.
        - 반복 유형은 다음과 같다: 매일, 매주, 매월, 매년
            - 만약, 윤년 29일에 또는 31일에 매월 또는 매년 반복일정을 설정한다면 어떻게 처리할까요? 다른 서비스를 참고해보시고 자유롭게 작성해보세요.
    2. **(필수) 반복 간격 설정**
        - 각 반복 유형에 대해 간격을 설정할 수 있다.
        - 예: 2일마다, 3주마다, 2개월마다 등
    3. **(필수) 반복 일정 표시**
        - 캘린더 뷰에서 반복 일정을 시각적으로 구분하여 표시한다.
            - 아이콘을 넣든 태그를 넣든 자유롭게 해보세요!
    4. **(필수) 반복 종료**
        - 반복 종료 조건을 지정할 수 있다.
        - 옵션: 특정 날짜까지, 특정 횟수만큼, 또는 종료 없음 (예제 특성상, 2025-09-30까지)
    5. **(필수) 반복 일정 단일 수정**
        - 반복일정을 수정하면 단일 일정으로 변경됩니다.
        - 반복일정 아이콘도 사라집니다.
    6. **(필수)**  **반복 일정 단일 삭제**
        - 반복일정을 삭제하면 해당 일정만 삭제합니다.
        
    
    시나리오
    
    - 반복 정보(유형, 간격, 종료일)를 선택하여 반복 일정을 추가한다. (1, 2, 4)
        - 통합 테스트
            - 매일 반복되는 일정이 올바르게 저장된다.
            - 매주 반복되는 일정이 올바르게 저장된다.
            - 매월 반복되는 일정이 올바르게 저장된다.
            - 매년 반복되는 일정이 올바르게 저장된다.
            - 29일에 추가된 일정은 윤년에만 나타난다.
            - 31일에 추가된 일정은 31일이 있는 달만 나타난다.
    - 추가된 반복 일정은 캘린더에 시각적으로 구분되어 표시된다. (3)
        - 통합 테스트
            - 매일 반복되는 일정이 올바르게 저장된다.
            - 매주 반복되는 일정이 올바르게 저장된다.
            - 매월 반복되는 일정이 올바르게 저장된다.
            - 매년 반복되는 일정이 올바르게 저장된다.
        - E2E 테스트 (UI 변경점 테스트)
            - 일정표에 노출된 반복 일정은 반복 아이콘을 포함한다.
    - 반복 일정 단일 수정을 하면 단일 일정으로 변경되고 그 일정만 수정되며 반복 일정 아이콘도 사라진다. (5)
        - 통합 테스트
            - 반복 일정 중 하나를 수정하면 반복 아이콘이 사라지며 단일 일정으로 변경된다.
        - E2E 테스트
            - 수정된 반복 일정은 반복 아이콘이 사라진다.
    - 반복 일정 단일 삭제를 하면 해당 일정만 삭제된다. (6)
        - 통합 테스트
            - 반복 일정 중 하나를 삭제하면 해당 일정만 삭제된다.
        - E2E 테스트
            - 삭제된 일정은 일정표에서 사라진다.
    
    통합 테스트 70% + E2E 테스트 30%
    
    ![스크린샷 2025-05-20 오후 11.33.04.png](attachment:06ca2d58-5a68-4724-8b48-e4f341216b19:스크린샷_2025-05-20_오후_11.33.04.png)
    
- 운서
    1. **(필수) 반복 유형 선택**
        - 일정 생성 또는 수정 시 반복 유형을 선택할 수 있다.
            - 일정 생성 폼에 반복 유형 선택 필드가 렌더링된다.
            - 유저가 설정한 반복 주기로 등록되어야 한다.
            - 반복 주기 설정 후 서버로 POST 요청되고 토스트가 호출된다.
        - 반복 유형은 다음과 같다: 매일, 매주, 매월, 매년 - 만약, 윤년 29일에 또는 31일에 매월 또는 매년 반복일정을 설정한다면 어떻게 처리할까요? 다른 서비스를 참고해보시고 자유롭게 작성해보세요.
            - 반복 유형을 매일로 선택하면, 매일 반복되는 일정이 생성되어야 한다.
            - 반복 유형을 매주로 선택하면, 매주 반복되는 일정이 생성되어야 한다.
            - 반복 유형을 매월로 선택하면, 매월 반복되는 일정이 생성되어야 한다.
            - 반복 유형을 매년로 선택하면, 매년 반복되는 일정이 생성되어야 한다.
            - 2월 29일에 매년 반복을 설정하면, 윤년이 아닌 해는 2월 28일로 대체된다.
            - 1월 31일에 매월 반복을 설정하면, 2월은 말일로 조정된다.
    2. **(필수) 반복 간격 설정**
        - 각 반복 유형에 대해 간격을 설정할 수 있다. - 예: 2일마다, 3주마다, 2개월마다 등
            - daily 반복일 때 간격이 2면 2일마다 생성된다.
            - weekly 반복일 때 간격이 2면 2주마다 생성된다.
            - monthly 반복일 때 간격이 2면 2개월마다 생성된다.
            - yearly 반복일 때 간격이 2면 2년마다 생성된다.
    3. **(필수) 반복 일정 표시**
        - 캘린더 뷰에서 반복 일정을 시각적으로 구분하여 표시한다. - 아이콘을 넣든 태그를 넣든 자유롭게 해보세요!
            - 반복 일정인 경우 캘린더에 🔁 아이콘이 표시된다.
            - 반복 일정이 아닌 경우 🔁 아이콘이 표시되지 않는다.
            - 반복 일정인 경우 캘린더에 표시가 되어야 한다.
            - 윤년 반복일정이 캘린더에 표시되어야 한다.
    4. **(필수) 반복 종료**
        - 반복 종료 조건을 지정할 수 있다. - 옵션: 특정 날짜까지, 특정 횟수만큼, 또는 종료 없음 (예제 특성상, 2025-09-30까지)
            - 반복 횟수(count)를 3으로 설정하면 3개의 일정만 생성된다
            - 반복 종료일(endDate)까지만 일정이 생성된다
    5. **(필수) 반복 일정 단일 수정**
        - 반복일정을 수정하면 단일 일정으로 변경됩니다.  - 반복일정 아이콘도 사라집니다.
            - 반복 일정 중 하나를 수정하면 해당 일정은 repeat.id가 제거되어 반복에서 분리된다
    6. **(필수)**  **반복 일정 단일 삭제**
        - 반복일정을 삭제하면 해당 일정만 삭제합니다.
        - 일정 생성 또는 수정 시 반복 유형을 선택할 수 있다.
        - 반복 유형은 다음과 같다: 매일, 매주, 매월, 매년 - 만약, 윤년 29일에 또는 31일에 매월 또는 매년 반복일정을 설정한다면 어떻게 처리할까요? 다른 서비스를 참고해보시고 자유롭게 작성해보세요.
            - 반복 일정 중 하나만 삭제하면 다른 일정은 유지된다
    
    각각 필수 요구사항에 대한 시나리오를 생각한 다음, 사용자 UX를 고려하여 진행을 하되, 이미 3-1 에서 진행된 util, 테스트 들이 있기 때문에 전체 흐름 과 이번에 추가된 *generateRepeatEvents에 대한 간단한 util 테스트가 필요하다고 생각됨*
    
- 태겸
    
    필수 요구사항들에 대한 시나리오들은 각각 통합테스트로 진행하며
    전체적인 흐름에 대해 e2e테스트가 필요하다.
    
    → 
    필수 요구사항들에 대하여 랜더링 되고 난 이후에 사용자 액션을 기대하며 전체적인 플로우를 통해 e2e테      스트를 진행하는것이 오히려 불필요한 코스트를 줄이는데 유리하다 생각
    
- 흥수
    1. **(필수) 반복 유형 선택**
    2. **(필수) 반복 간격 설정**
    3. **(필수) 반복 종료**
        - unit
            - `/event-list` 에 필요한 데이터를 올바르게 생성하는지
            - 윤년이나 월 반복(30/31) 등 적절히 예외 처리가 되는지
            - 반복 간격에 따른 데이터를 올바르게 생성하는지
        - integration
            - 각 반복 유형별, 간격별, 종료일로 일정이 올바르게 추가되는지 확인할 수 있는 테스트
    4. **(필수) 반복 일정 표시**
        - 화면에 반복 일정 아이콘이 생기는지
    5. **(필수) 반복 일정 단일 수정**
        - ~~반복되던 일정이 모두 삭제되는건지 ??~~
    6. **(필수)**  **반복 일정 단일 삭제**
        - 반복 여부에 상관없이 일정이 올바르게 1개만 삭제되는지
    
- 혜진
  - 미참여

### 합의된 테스트 전략과 그 이유는 무엇인가요?

# 결론

## ✅ 반복 일정 기능 테스트 전략 요약

### 📊 전체 테스트 비중

| 테스트 레벨 | 비중 | 목적 |
| --- | --- | --- |
| **유닛 테스트** | 20% | `generateRepeatEvents`, 날짜 계산 로직, 말일/윤년 등 반복 규칙 유틸 검증 |
| **통합 테스트** | **50~60%** | API 요청, DB 처리, UI와 상태 동기화 중심 기능 검증 |
| **E2E 테스트** | **20~30%** | 실제 사용자 플로우 기준 전체 흐름 검증, UI 아이콘/삭제/수정 등 시각 피드백 포함 |

### 🧩 기능 요구사항별 테스트 전략

| 기능 번호 | 기능 | 테스트 종류 | 테스트 내용 요약 |
| --- | --- | --- | --- |
| 1 | **반복 유형 선택** | **Unit + Integration** | 유저가 선택한 반복 유형이 올바르게 저장되는지매일/주/월/년 반복 이벤트가 서버에 저장되고 `/event-list`에 표시되는지윤년/말일 처리 (예: 2월 29일 → 2월 28일로 보정) |
| 2 | **반복 간격 설정** | **Unit + Integration** | `2일/2주/2개월/2년` 설정 시 정확히 반복되는지각 반복 유형에 대한 간격이 잘 반영되는지 |
| 3 | **반복 일정 표시** | **Integration + E2E** | 캘린더에 반복 일정이 시각적으로 렌더링되는지🔁 아이콘 존재 여부반복이 아닐 경우 아이콘 없음 |
| 4 | **반복 종료 설정** | **Unit + Integration** | 종료 조건(`count`, `endDate`, `무제한`)에 따라 적절한 횟수만큼 이벤트 생성 |
| 5 | **반복 일정 단일 수정** | **Integration + E2E** | 수정된 일정만 repeat.id가 제거되어 단일 일정으로 분리수정된 일정의 반복 아이콘 제거됨기존 반복 그룹은 유지됨 |
| 6 | **반복 일정 단일 삭제** | **Integration + E2E** | 선택된 일정 1건만 삭제되고, 나머지 반복 일정은 유지삭제 후 화면에서도 해당 일정 사라짐 |

### 🛠 유닛 테스트 대상 유틸

| 유틸 함수 | 테스트 포인트 |
| --- | --- |
| `generateRepeatEvents` | 간격별 반복 이벤트 생성윤년 2월 29일 → 2월 28일 보정말일 31일 → 30일/28일 보정종료 조건(`count`, `endDate`) 준수 |
| 기타 date util들 | 특정 요일 기준 반복말일/윤년 체크 로직 |

### 🎬 E2E 테스트 시나리오 요약

| 시나리오 | 목적 |
| --- | --- |
| 반복 일정 생성 플로우 | 반복 유형/간격/종료 조건 → 일정 추가 → 반복 아이콘 UI 확인 |
| 반복 일정 단일 수정 | 일정 수정 → 단일 일정으로 분리됨 확인 → 아이콘 사라짐 확인 |
| 반복 일정 단일 삭제 | 일정 삭제 → 해당 일정만 삭제됨 확인 → UI에서 제거됨 |

### 📌 전략적 결정 포인트

- ✅ 유틸 함수는 `generateRepeatEvents()`를 중심으로 **말일/윤년/간격/종료 조건 처리**에 대한 유닛 테스트 강화
- ✅ 반복 일정의 저장/조회/표시/변경/삭제는 전부 **통합 테스트로 커버**
- ✅ E2E는 사용자 행동 기반의 흐름 테스트만 선택적으로 적용 (중복 테스트 방지)

---

# **⭐️결론⭐️**

## 1. 유닛 테스트 ( 30 - 50% )

hook이나 `eventUtils` , `dateUtils` 등 변경점이 존재하는 유틸 함수에 대해서 작성한다.

hook에서 구현한 반복 일정 생성/수정/삭제와 같은 주요 로직은 테스트 해야하지만 유틸 함수같이 지엽적이고 작은 단위는 필수적이진 않다. 우리의 목적은 모든 테스트 가능한 것들을 다 커버하는 것이 아닌 주요 비즈니스 로직을 검증하는 것.

## 2. 통합 테스트 ( 20 - 30% )

핵심 기능에 대한 컴포넌트나 함수, 훅을 통합하여 사용자 시나리오 **논리적 검증**.

## 3. E2E 테스트 ( 20 - 30% )

**실제 사용자 플로우 기준 전체 흐름 검증**, **UI** 아이콘/삭제/수정 등 시각 피드백 포함.

### 추가로 작성된 테스트 코드는 어떤 것들이 있나요?

- e2e 일정 추가/삭제 테스트
  - 전체 일정 추가 및 삭제
- e2e 반복 일정 단일 수정/삭제 테스트
  - 특정 반복 일정만 수정 → 반복 아이콘 사라짐
  - 특정 반복 일정만 삭제 → 나머지 반복 일정은 유지
- 
---

## 과제 셀프회고

<!-- 과제에 대한 회고를 작성해주세요 -->

### 기술적 성장

<!-- 예시
- 새로 학습한 개념
- 기존 지식의 재발견/심화
- 구현 과정에서의 기술적 도전과 해결
-->

### 코드 품질

<!-- 예시
- 특히 만족스러운 구현
- 리팩토링이 필요한 부분
- 코드 설계 관련 고민과 결정
-->

### 학습 효과 분석

<!-- 예시
- 가장 큰 배움이 있었던 부분
- 추가 학습이 필요한 영역
- 실무 적용 가능성
-->

### 과제 피드백

<!-- 예시
- 과제에서 모호하거나 애매했던 부분
- 과제에서 좋았던 부분
-->

## 리뷰 받고 싶은 내용

<!--
피드백 받고 싶은 내용을 구체적으로 남겨주세요
모호한 요청은 피드백을 남기기 어렵습니다.

참고링크: https://chatgpt.com/share/675b6129-515c-8001-ba72-39d0fa4c7b62

모호한 요청의 예시)
- 코드 스타일에 대한 피드백 부탁드립니다.
- 코드 구조에 대한 피드백 부탁드립니다.
- 개념적인 오류에 대한 피드백 부탁드립니다.
- 추가 구현이 필요한 부분에 대한 피드백 부탁드립니다.

구체적인 요청의 예시)
- 현재 함수와 변수명을 보면 직관성이 떨어지는 것 같습니다. 함수와 변수를 더 명확하게 이름 지을 수 있는 방법에 대해 조언해주실 수 있나요?
- 현재 파일 단위로 코드가 분리되어 있지만, 모듈화나 계층화가 부족한 것 같습니다. 어떤 기준으로 클래스를 분리하거나 모듈화를 진행하면 유지보수에 도움이 될까요?
- MVC 패턴을 따르려고 했는데, 제가 구현한 구조가 MVC 원칙에 맞게 잘 구성되었는지 검토해주시고, 보완할 부분을 제안해주실 수 있을까요?
- 컴포넌트 간의 의존성이 높아져서 테스트하기 어려운 상황입니다. 의존성을 낮추고 테스트 가능성을 높이는 구조 개선 방안이 있을까요?
-->
